<div class="w-full my-2 mt-4  bg-card text-muted-foreground relative  rounded-lg">
  <div class="flex-col rounded-lg bg-background px-8 py-8 sm:flex-row shadow-lg">
    <div class="mb-4 flex items-center justify-between">
      <div class="flex-col items-center"><h3 class="text-md font-bold text-foreground"> รายชื่อที่ปรึกษาโครงการ </h3></div>
      <div class="flex justify-end w-1/3">
        <div class="relative flex align-middle text-center  p-2 w-full" *ngIf="addToggle">
          <select #input [(ngModel)]="input.value" (change)="add(input.value)" class="form-input focus:outline-none bg-card block w-full  py-2 px-3 rounded-md shadow-sm text-muted-foreground">
            <option selected value="">เลือกผู้รับผิดชอบโครงการ</option>
<!--            <option *ngFor="let obj of users; index as i" [value]="i">{{ obj.advisor?.name }}</option>-->
          </select>
          <app-button (click)="setNewUser(input.value)" class="self-center ms-2" full impact="bold" tone="primary" shape="rounded" size="medium">เลือก</app-button>
        </div>
        <app-button (click)="setNewUser(null)" class="self-center " full impact="bold" tone="card" shape="rounded" size="medium">{{ addToggle ? 'ยกเลิก' : 'เพิ่ม' }}</app-button>
      </div>
    </div>
    <div class="relative overflow-x-auto">
      <app-button *ngIf="!form?.at(0)?.value?.user?.id && !newUser.value.user?.id" (click)="setNewUser(null)" class="self-center " full impact="bold" tone="card" shape="rounded" size="medium">ไม่มีข้อมูลที่ปรึกษา</app-button>
      <table class="w-full table-auto">
        <thead class="text-xs uppercase text-muted-foreground" *ngIf="form?.at(0)?.value?.user?.id">
        <tr>
          <th class="py-3 text-left">ขื่อ</th>
          <th class="py-3 text-right">องค์กร</th>
          <th class="py-3 text-right">ตำแหน่ง</th>
          <th class="py-3 text-right">เบอร์โทรศัพท์</th>
          <th class="py-3 text-right"></th>
        </tr>
        </thead>
        <tbody>
        <ng-container *ngFor="let obj of f">
          <tr class="border-b border-dashed border-border hover:bg-card ng-star-inserted" *ngIf="obj.user.id">
            <td class="py-2 pr-2">
              <div class="flex items-center">
                <img alt="" class="mr-2 h-10 w-10 flex-none rounded-sm" [ngSrc]="environment.apiUrl + obj.user.advisor.profile" width="10" height="10">
                <div class="flex flex-col justify-items-start">
                  <a href="#" class="mb-1 text-sm font-semibold text-foreground">{{ obj.user.advisor.name }}</a>
                  <span class="text-xs font-semibold text-muted-foreground/50">{{ obj.user.email }}</span></div>
              </div>
            </td>
            <td class="py-2 pl-2 text-right"><span class="text-sm font-semibold text-muted-foreground">{{ obj.user.role.organization.name }}</span></td>
            <td class="py-2 pl-2 text-right"><span class="text-sm font-semibold text-muted-foreground">{{ obj.user.role.position.name }}</span></td>
            <td class="py-2 pl-2 text-right"><span class="text-sm font-semibold text-muted-foreground">{{ obj.user.advisor  .phoneNumber }}</span></td>
            <td class="py-2 pl-2 text-right">
              <div class="flex justify-end">
                <button class="flex h-7 w-7 items-center justify-center rounded-md bg-card text-muted-foreground hover:bg-muted hover:text-foreground">
                  <svg-icon src="assets/icons/heroicons/outline/arrow-sm-right.svg" svgClass="h-5 w-5">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" class="h-5 w-5" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                    </svg>
                  </svg-icon>
                </button>
              </div>
            </td>
          </tr>
        </ng-container>
        <ng-container *ngIf="newUser.value.user?.id">
          <tr class="border-b border-dashed border-border hover:bg-card ng-star-inserted">
            <td class="py-2 pr-2">
              <div class="flex items-center"><img alt="" class="mr-2 h-10 w-10 flex-none rounded-sm" [ngSrc]="environment.apiUrl + newUser.value.user?.['advisor']?.['profile']" width="10" height="10">
                <div class="flex flex-col justify-items-start">
                  <a href="#" class="mb-1 text-sm font-semibold text-foreground">{{ newUser.value.user?.['advisor']?.['name'] }}</a>
                  <span class="text-xs font-semibold text-muted-foreground/50">{{ newUser.value.user?.['email'] }}</span></div>
              </div>
            </td>
            <td class="py-2 pl-2 text-right"><span class="text-sm font-semibold text-muted-foreground">{{ newUser.value.user?.['role']?.['organization']?.['name'] }}</span></td>
            <td class="py-2 pl-2 text-right"><span class="text-sm font-semibold text-muted-foreground">{{ newUser.value.user?.['role']?.['position']?.['name'] }}</span></td>
            <td class="py-2 pl-2 text-right"><span class="text-sm font-semibold text-muted-foreground">{{ newUser.value.user?.['advisor']?.['phoneNumber'] }}</span></td>
            <td class="py-2 pl-2 text-right">
              <div class="flex justify-end">
                <button class="flex h-7 w-7 items-center justify-center rounded-md bg-card text-muted-foreground hover:bg-muted hover:text-foreground">
                  <svg-icon src="assets/icons/heroicons/outline/arrow-sm-right.svg" svgClass="h-5 w-5">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" class="h-5 w-5" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                    </svg>
                  </svg-icon>
                </button>
              </div>
            </td>
          </tr>
        </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</div>
